<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Thu Apr 02 14:27:52 PDT 2015 -->
<title>ExecutorAllocationManager (Spark 1.4.0 JavaDoc)</title>
<meta name="date" content="2015-04-02">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ExecutorAllocationManager (Spark 1.4.0 JavaDoc)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/apache/spark/ExecutorAllocationClient.html" title="interface in org.apache.spark"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/apache/spark/ExecutorLostFailure.html" title="class in org.apache.spark"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/apache/spark/ExecutorAllocationManager.html" target="_top">Frames</a></li>
<li><a href="ExecutorAllocationManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.spark</div>
<h2 title="Class ExecutorAllocationManager" class="title">Class ExecutorAllocationManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>Object</li>
<li>
<ul class="inheritance">
<li>org.apache.spark.ExecutorAllocationManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../org/apache/spark/Logging.html" title="interface in org.apache.spark">Logging</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">ExecutorAllocationManager</span>
extends Object
implements <a href="../../../org/apache/spark/Logging.html" title="interface in org.apache.spark">Logging</a></pre>
<div class="block">An agent that dynamically allocates and removes executors based on the workload.
 <p>
 The add policy depends on whether there are backlogged tasks waiting to be scheduled. If
 the scheduler queue is not drained in N seconds, then new executors are added. If the queue
 persists for another M seconds, then more executors are added and so on. The number added
 in each round increases exponentially from the previous round until an upper bound on the
 number of executors has been reached. The upper bound is based both on a configured property
 and on the number of tasks pending: the policy will never increase the number of executor
 requests past the number needed to handle all pending tasks.
 <p>
 The rationale for the exponential increase is twofold: (1) Executors should be added slowly
 in the beginning in case the number of extra executors needed turns out to be small. Otherwise,
 we may add more executors than we need just to remove them later. (2) Executors should be added
 quickly over time in case the maximum number of executors is very high. Otherwise, it will take
 a long time to ramp up under heavy workloads.
 <p>
 The remove policy is simpler: If an executor has been idle for K seconds, meaning it has not
 been scheduled to run any tasks, then it is removed.
 <p>
 There is no retry logic in either case because we make the assumption that the cluster manager
 will eventually fulfill all requests it receives asynchronously.
 <p>
 The relevant Spark properties include the following:
 <p>
   spark.dynamicAllocation.enabled - Whether this feature is enabled
   spark.dynamicAllocation.minExecutors - Lower bound on the number of executors
   spark.dynamicAllocation.maxExecutors - Upper bound on the number of executors
   spark.dynamicAllocation.initialExecutors - Number of executors to start with
 <p>
   spark.dynamicAllocation.schedulerBacklogTimeout (M) -
     If there are backlogged tasks for this duration, add new executors
 <p>
   spark.dynamicAllocation.sustainedSchedulerBacklogTimeout (N) -
     If the backlog is sustained for this duration, add more executors
     This is used only after the initial backlog timeout is exceeded
 <p>
   spark.dynamicAllocation.executorIdleTimeout (K) -
     If an executor has been idle for this duration, remove it</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/apache/spark/ExecutorAllocationManager.html#ExecutorAllocationManager(org.apache.spark.ExecutorAllocationClient,%20org.apache.spark.scheduler.LiveListenerBus,%20org.apache.spark.SparkConf)">ExecutorAllocationManager</a></strong>(<a href="../../../org/apache/spark/ExecutorAllocationClient.html" title="interface in org.apache.spark">ExecutorAllocationClient</a>&nbsp;client,
                         <a href="../../../org/apache/spark/scheduler/LiveListenerBus.html" title="class in org.apache.spark.scheduler">LiveListenerBus</a>&nbsp;listenerBus,
                         <a href="../../../org/apache/spark/SparkConf.html" title="class in org.apache.spark">SparkConf</a>&nbsp;conf)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../org/apache/spark/ExecutorAllocationManager.html#NOT_SET()">NOT_SET</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/apache/spark/ExecutorAllocationManager.html#setClock(org.apache.spark.util.Clock)">setClock</a></strong>(<a href="../../../org/apache/spark/util/Clock.html" title="interface in org.apache.spark.util">Clock</a>&nbsp;newClock)</code>
<div class="block">Use a different clock for this allocation manager.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/apache/spark/ExecutorAllocationManager.html#start()">start</a></strong>()</code>
<div class="block">Register for scheduler callbacks to decide when to add and remove executors.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.spark.Logging">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.spark.<a href="../../../org/apache/spark/Logging.html" title="interface in org.apache.spark">Logging</a></h3>
<code><a href="../../../org/apache/spark/Logging.html#initializeIfNecessary()">initializeIfNecessary</a>, <a href="../../../org/apache/spark/Logging.html#initializeLogging()">initializeLogging</a>, <a href="../../../org/apache/spark/Logging.html#isTraceEnabled()">isTraceEnabled</a>, <a href="../../../org/apache/spark/Logging.html#log_()">log_</a>, <a href="../../../org/apache/spark/Logging.html#log()">log</a>, <a href="../../../org/apache/spark/Logging.html#logDebug(scala.Function0)">logDebug</a>, <a href="../../../org/apache/spark/Logging.html#logDebug(scala.Function0,%20java.lang.Throwable)">logDebug</a>, <a href="../../../org/apache/spark/Logging.html#logError(scala.Function0)">logError</a>, <a href="../../../org/apache/spark/Logging.html#logError(scala.Function0,%20java.lang.Throwable)">logError</a>, <a href="../../../org/apache/spark/Logging.html#logInfo(scala.Function0)">logInfo</a>, <a href="../../../org/apache/spark/Logging.html#logInfo(scala.Function0,%20java.lang.Throwable)">logInfo</a>, <a href="../../../org/apache/spark/Logging.html#logName()">logName</a>, <a href="../../../org/apache/spark/Logging.html#logTrace(scala.Function0)">logTrace</a>, <a href="../../../org/apache/spark/Logging.html#logTrace(scala.Function0,%20java.lang.Throwable)">logTrace</a>, <a href="../../../org/apache/spark/Logging.html#logWarning(scala.Function0)">logWarning</a>, <a href="../../../org/apache/spark/Logging.html#logWarning(scala.Function0,%20java.lang.Throwable)">logWarning</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ExecutorAllocationManager(org.apache.spark.ExecutorAllocationClient, org.apache.spark.scheduler.LiveListenerBus, org.apache.spark.SparkConf)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ExecutorAllocationManager</h4>
<pre>public&nbsp;ExecutorAllocationManager(<a href="../../../org/apache/spark/ExecutorAllocationClient.html" title="interface in org.apache.spark">ExecutorAllocationClient</a>&nbsp;client,
                         <a href="../../../org/apache/spark/scheduler/LiveListenerBus.html" title="class in org.apache.spark.scheduler">LiveListenerBus</a>&nbsp;listenerBus,
                         <a href="../../../org/apache/spark/SparkConf.html" title="class in org.apache.spark">SparkConf</a>&nbsp;conf)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="NOT_SET()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NOT_SET</h4>
<pre>public static&nbsp;long&nbsp;NOT_SET()</pre>
</li>
</ul>
<a name="setClock(org.apache.spark.util.Clock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setClock</h4>
<pre>public&nbsp;void&nbsp;setClock(<a href="../../../org/apache/spark/util/Clock.html" title="interface in org.apache.spark.util">Clock</a>&nbsp;newClock)</pre>
<div class="block">Use a different clock for this allocation manager. This is mainly used for testing.</div>
</li>
</ul>
<a name="start()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;start()</pre>
<div class="block">Register for scheduler callbacks to decide when to add and remove executors.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/apache/spark/ExecutorAllocationClient.html" title="interface in org.apache.spark"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/apache/spark/ExecutorLostFailure.html" title="class in org.apache.spark"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/apache/spark/ExecutorAllocationManager.html" target="_top">Frames</a></li>
<li><a href="ExecutorAllocationManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
